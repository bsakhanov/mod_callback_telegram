# «Telegram Callback» Joomla module

![Version](https://img.shields.io/badge/VERSION-1.2.0-0366d6.svg?style=for-the-badge)
![Joomla](https://img.shields.io/badge/joomla-3.7+-1A3867.svg?style=for-the-badge)
![Php](https://img.shields.io/badge/php-5.6+-8892BF.svg?style=for-the-badge)

**ВНИМАНИЕ! текущая верия несовместима с версией 1.0.0!**

Модуль обратной связи, отсылающий сообщения в телеграм, современный сервис моментальных сообщений.

Сообщение с формы модуля отправляется в заранее созданного бота.

Бот создается с помощью другого, системного бота.

## Описание

Список полей по умолчанию пуст, потому следует его заполнить, затем сохранить. Поддерживаемые типы полей: text, email, url, tel, password, textarea, select, checkbox, radio. Каждое поле обязательно должно иметь имя (для формирования формы) и наименование (для идентификации поля в сообщении в телеграмме).

Также можно указать заголовок для сообщения в телеграме, если заголовок не указан, используется строка вида «Сообщение с сайта {url}».

Модуль поддерживает переопределяемые шаблоны сообщений, отправляемых в телеграм. Шаблоны находятся в папке /layouts.

Модуль не содержит встроенного CSS и JS, однако разметка шаблона формы представлена в трех вариантах: bootstrap2 (default), bootstrap3/4, uikit2, uikit3.

Сообщение об успешной отправке поста либо ошибке выводится посредством стандартного механизма системный сообщений Joomla.

**ВНИМАНИЕ!** Должен быть отключен `open_basedir`, т.к. с ним не работает используемый в модуле curl.

---

## Как создать бота

- находим в телеграме бота по имени @BotFather (или переходим по ссылке http://t.me/botfather);
- вводим боту команду `/newbot` (либо выбираем ее из списка команд в приветственном сообщении);
- последовательно вводим сначала наименование бота (любое, какое придумаете), затем системный никнейм, состоящий только из латинских символов, цифр и символа «_»;
- вуаля! нам отвечают, что бот создан и предлагаю быструю ссылку на него, а также &ndash; внимание! &ndash; токен безопасности, эдакий универсальный ключ от свежесозданного бота;
- открываем в телеграме свежесозданный бот и вводим команду `/start`, тем самым запустив работу бота (это важно!).

В параметрах установленного на сайт модуля «Telegram callback» вводим полученный при создании бота токен, затем жмем кнопку «Получить ID чата» &ndash; соответствующее поле должно заполнится. Если свежесозданный бот не был запущен командой `/start`, то ничего не произойдет. ID чата нельзя получить, если бот получал сообщения из других источников, помимо собственно чата в телеграме.
